<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Checkout | GM3A</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: #fff;
      color: #000;
      font-family: Arial, Helvetica, sans-serif;
    }
 /* STICKY */
.sticky-nav {
  position: sticky;
  top: 0;
  z-index: 999;
  background: #fff;
  border-bottom: 1px solid #e5e5e5;
}

/* GRID FIX */
.nav-gm3a {
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  padding: 18px 0;
}

/* LEFT */
.nav-left {
  display: flex;
  gap: 22px;
}

/* CENTER LOGO */
.nav-center {
  display: flex;
  justify-content: center;
}

.brand-image {
  height: 38px;
}

/* RIGHT */
.nav-right {
  display: flex;
  justify-content: flex-end;
}

/* NAV LINK */
.nav-link {
  font-size: 13px;
  font-weight: 600;
  letter-spacing: 1px;
  text-transform: uppercase;
  color: #000;
  text-decoration: none;
  position: relative;
  padding-bottom: 4px;
}

/* UNDERLINE HOVER */
.nav-link::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: 0;
  width: 0%;
  height: 2px;
  background: #000;
  transition: width 0.3s ease;
}

.nav-link:hover::after {
  width: 100%;
}

/* LOGIN BUTTON */
.nav-login {
  padding: 8px 20px;
  border: 1.5px solid #000;
  font-size: 12px;
  font-weight: 600;
  letter-spacing: 1px;
  text-transform: uppercase;
  text-decoration: none;
  color: #000;
  transition: all 0.3s ease;
}

.nav-login:hover {
  background: #000;
  color: #fff;
}
    .btn-black {
      background: #000;
      color: #fff;
      padding: 10px 22px;
      text-decoration: none;
      font-weight: 600;
      text-transform: uppercase;
      border: 1px solid #000;
      display: inline-block;
      cursor: pointer;
    }
    .btn-black:hover {
      background: #fff;
      color: #000;
    }
    .checkout-box {
      max-width: 900px;
      margin: 60px auto;
    }
    .cart-box {
      border: 1px solid #ccc;
      padding: 20px;
      margin-bottom: 30px;
    }
    .cart-item {
      display: flex;
      justify-content: space-between;
      border-bottom: 1px solid #eee;
      padding: 8px 0;
    }
    .remove {
      color: red;
      cursor: pointer;
      font-size: 14px;
    }
  </style>
</head>
<body>

<header class="header-gm3a sticky-nav">
  <nav class="container nav-gm3a">

    <div class="nav-left">
      <a href="#" id="homeBtn" class="nav-link">Shop</a>
      <a href="#categories" class="nav-link">Collection</a>

    </div>

    <div class="nav-center">
      <img src="images/logo1.png" alt="GM3A" class="brand-image">
    </div>

    <div class="nav-right">
      <a href="profil.html" class="nav-link">Profil</a>
    </div>

  </nav>
</header>

<div class="checkout-box">

  <!-- RINGKASAN KERANJANG -->
  <div class="cart-box">
    <h5>Ringkasan Pesanan</h5>
    <div id="cartList"></div>
    <strong>Total: Rp <span id="total">0</span></strong>
  </div>

  <!-- FORM CHECKOUT -->
  <form>
    <div class="row">
      <div class="col-md-6 mb-3">
        <label class="form-label">Nama Lengkap</label>
        <input type="text" class="form-control" required>
      </div>
      <div class="col-md-6 mb-3">
        <label class="form-label">Nomor WhatsApp</label>
        <input type="tel" class="form-control" required>
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">Alamat Pengiriman</label>
      <textarea class="form-control" rows="3" required></textarea>
    </div>

    <div class="mb-4">
      <label class="form-label">Metode Pembayaran</label>
      <select class="form-control" required>
        <option value="">Pilih metode</option>
        <option>Transfer Bank</option>
        <option>COD</option>
        <option>E-Wallet</option>
      </select>
    </div>

    <div class="text-center">
      <a class="btn-black" onclick="submitOrder()">Konfirmasi Pesanan</a>
    </div>
  </form>
</div>

<footer>
  <div id="footer-bottom">
    <div class="container">
      <div class="row d-flex flex-wrap justify-content-between mb-3">
        <div class="col-md-4 col-sm-6">
          <div class="Shipping d-flex">
            <p>We ship with:</p>
            <div class="card-wrap">
              <img src="images/dhl.png" alt="visa">
              <img src="images/shippingcard.png" alt="mastercard">
            </div>
          </div>
        </div>
        <div class="col-md-4 col-sm-6">
          <div class="payment-method d-flex justify-content-md-center">
            <p>Metode Pembayaran:</p>
            <div class="card-wrap">
              <img src="images/visa.jpg" alt="visa">
              <img src="images/mastercard.jpg" alt="mastercard">
              <img src="images/paypal.jpg" alt="paypal">
            </div>
          </div>
        </div>
        <div class="col-md-4 col-sm-12 text-md-end">
          <p>Â© 2026 GM3A Fashion. All Rights Reserved.</p>
      </div>
    </div>
  </div>
</footer>

<script>
  let cart = JSON.parse(localStorage.getItem('cart')) || [];

  function renderCart() {
    const cartList = document.getElementById('cartList');
    const totalEl = document.getElementById('total');
    cartList.innerHTML = '';
    let total = 0;

    cart.forEach((item, index) => {
      total += item.price;
      cartList.innerHTML += `
        <div class="cart-item">
          <span>${item.name}</span>
          <span>
            Rp ${item.price.toLocaleString('id-ID')} 
            <span class="remove" onclick="removeItem(${index})">Hapus</span>
          </span>
        </div>`;
    });

    totalEl.innerText = total.toLocaleString('id-ID');
    localStorage.setItem('cart', JSON.stringify(cart));
  }

  function removeItem(index) {
    cart.splice(index, 1);
    renderCart();
  }

  function submitOrder() {
    if (cart.length === 0) {
      alert('Keranjang kosong');
      return;
    }
    alert('Pesanan berhasil dikirim!');
    localStorage.removeItem('cart');
  }

  renderCart();

function submitOrder() {
  if (cart.length === 0) {
    alert('Keranjang kosong');
    return;
  }

  const currentUser = localStorage.getItem('currentUser');
  let orders = JSON.parse(localStorage.getItem('orders')) || [];

  const newOrder = {
    user: currentUser,
    items: cart,
    total: cart.reduce((sum, i) => sum + i.price, 0),
    date: new Date().toLocaleString('id-ID'),
    invoice: 'GM3A-' + Date.now()
  };

  // simpan ke histori
  orders.push(newOrder);
  localStorage.setItem('orders', JSON.stringify(orders));

  // simpan PESANAN TERAKHIR untuk STRUK
  localStorage.setItem('lastOrder', JSON.stringify(newOrder));

  // bersihkan keranjang
  localStorage.removeItem('cart');

  // pindah ke struk
  window.location.href = 'struk.html';
}
</script>

</body>
</html>
